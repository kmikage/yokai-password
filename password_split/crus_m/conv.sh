#!/bin/bash
pushd password_split
mkdir -p sorted filtered
for i in passwords_?.txt passwords_nmc.txt;do
sed -ne "
h
s/$/\t/
x
s/\([HJKMNPR]\)\1\(Y?[AIUEO]\)/っ\1\2/g
s/\([CSTW]\)\1\([YH]?[AIUEO]\)/っ\1\2/g
s/KA/か/g
s/KI/き/g
s/KU/く/g
s/KE/け/g
s/KO/こ/g
s/GA/が/g
s/GI/ぎ/g
s/GU/ぐ/g
s/GE/げ/g
s/GO/ご/g
s/SA/さ/g
s/SI/し/g
s/SU/す/g
s/SE/せ/g
s/SO/そ/g
s/ZA/ざ/g
s/ZI/じ/g
s/JI/じ/g
s/ZU/ず/g
s/ZE/ぜ/g
s/ZO/ぞ/g
s/TA/た/g
s/TI/ち/g
s/CHI/ち/g
s/TU/つ/g
s/TSU/つ/g
s/TE/て/g
s/TO/と/g
s/NA/な/g
s/NI/に/g
s/NU/ぬ/g
s/NE/ね/g
s/NO/の/g
s/BA/ば/g
s/BI/び/g
s/BU/ぶ/g
s/BE/べ/g
s/BO/ぼ/g
s/PA/ぱ/g
s/PI/ぴ/g
s/PU/ぷ/g
s/PE/ぺ/g
s/PO/ぽ/g
s/MA/ま/g
s/MI/み/g
s/MU/む/g
s/ME/め/g
s/MO/も/g
s/RA/ら/g
s/RI/り/g
s/RU/る/g
s/RE/れ/g
s/RO/ろ/g
s/WA/わ/g
s/WI/ゐ/g
s/WE/ゑ/g
s/WO/を/g
s/WHA/うぁ/g
s/WHI/うぃ/g
s/WHE/うぇ/g
s/WHO/うぉ/g
s/SHA/しゃ/g
s/SHU/しゅ/g
s/SHO/しょ/g
s/SYA/しゃ/g
s/SYU/しゅ/g
s/SYO/しょ/g
s/ZHA/じゃ/g
s/ZHU/じゅ/g
s/ZHO/じょ/g
s/ZYA/じゃ/g
s/ZYU/じゅ/g
s/ZYO/じょ/g
s/JA/じゃ/g
s/JU/じゅ/g
s/JO/じょ/g
s/JYA/じゃ/g
s/JYU/じゅ/g
s/JYO/じょ/g
s/KYA/きゃ/g
s/KYU/きゅ/g
s/KYO/きょ/g
s/GYA/ぎゃ/g
s/GYU/ぎゅ/g
s/GYO/ぎょ/g
s/TYA/ちゃ/g
s/TYI/ちぃ/g
s/TYU/ちゅ/g
s/TYE/ちぇ/g
s/TYO/ちょ/g
s/THA/てゃ/g
s/THI/てぃ/g
s/THU/てゅ/g
s/THE/てぇ/g
s/THO/てょ/g
s/NYA/にゃ/g
s/NYU/にゅ/g
s/NYO/にょ/g
s/MYA/みゃ/g
s/MYU/みゅ/g
s/MYO/みょ/g
s/HA/は/g
s/HI/ひ/g
s/HU/ふ/g
s/HE/へ/g
s/HO/ほ/g
s/YA/や/g
s/YU/ゆ/g
s/YO/よ/g
s/A/あ/g
s/I/い/g
s/U/う/g
s/E/え/g
s/O/お/g
s/N/ん/g
s/n/ナ/g
s/m/ム/g
s/c/コ/g
H
x
s/\n//
p
" "$i" | sort -t'	' -k2 |tee sorted/"$(basename "$i" .txt)_conv.txt" | grep -e '	[-あ-ん]\{3,\}' > filtered/"$(basename "$i" .txt)_conv.txt"
done
popd
